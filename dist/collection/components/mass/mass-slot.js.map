{"version":3,"file":"mass-slot.js","sourceRoot":"","sources":["../../../src/components/mass/mass-slot.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, h, Fragment } from '@stencil/core'\r\nimport { D } from '../../utils/days'\r\n\r\n@Component({\r\n  tag: 'mass-slot',\r\n  styleUrl: 'mass.css',\r\n  shadow: false\r\n})\r\n\r\nexport class MassSlot {\r\n\r\n  @Prop() accordionIndex: number\r\n  @Prop() accordionExpanded: string\r\n  @Prop() massIndex: number\r\n  @Prop() expanded = true\r\n\r\n  @Prop() massInfo: {\r\n    time: string,\r\n    info: string,\r\n    duration: string,\r\n    langCode: string,\r\n    needUpdate: boolean,\r\n    lastConfirmRelevance: string,\r\n    updatePeriodInDays: string,\r\n    online: boolean,\r\n    rorate: boolean,\r\n    address: string,\r\n    broadcastUrl: string,\r\n  }\r\n\r\n  private toggleMassPlateButton = (event: Event) => {\r\n    let btn = (event.target) as HTMLElement\r\n    if (btn.tagName != 'BUTTON') {\r\n      while (btn.tagName != 'BUTTON' && !btn.classList.contains('accordion-button')) {\r\n        btn = btn.parentElement\r\n      }\r\n    }\r\n    \r\n    btn.ariaExpanded = (!btn.classList.toggle('collapsed')).toString()\r\n    btn.parentElement.parentElement.querySelector(btn.dataset.bsTarget).classList.toggle('show')\r\n  }\r\n\r\n  render() {\r\n    let btnExpanded = (this.expanded) ? (\"\") : (\"collapsed\")\r\n    let btnAria = (this.expanded) ? (\"true\") : (\"false\")\r\n    let accordionExpanded = (this.expanded) ? (\"show\") : (\"\")\r\n\r\n    let lCR = D.strToDate(this.massInfo.lastConfirmRelevance)\r\n    let fCR = new Date(lCR)\r\n    fCR.setDate(lCR.getDate() + parseInt(this.massInfo.updatePeriodInDays, 10))\r\n    \r\n    let actual = false\r\n    if (fCR.getTime() >= Date.now()) {actual = true}\r\n\r\n    return (\r\n    <>\r\n      <div class=\"accordion-item\">\r\n\r\n        <h2 class=\"accordion-header\">\r\n          <button\r\n            class={`accordion-button ${btnExpanded}`}\r\n            type=\"button\" data-bs-toggle=\"collapse\"\r\n            data-bs-target={`#flush-collapse${this.accordionIndex}-${this.massIndex}`} \r\n            aria-expanded={btnAria}\r\n            aria-controls={`flush-collapse${this.accordionIndex}-${this.massIndex}`}\r\n            onClick={this.toggleMassPlateButton}\r\n            >\r\n\r\n            <mass-plate\r\n              class='d-flex flex-row align-items-center'\r\n              actual={actual}\r\n              time={this.massInfo.time}\r\n              rorate={this.massInfo.rorate}\r\n              online={this.massInfo.online}\r\n            ></mass-plate>\r\n\r\n          </button>\r\n        </h2>\r\n\r\n        <div\r\n          id={`flush-collapse${this.accordionIndex}-${this.massIndex}`}\r\n          class={`accordion-collapse collapse ${accordionExpanded}`}\r\n          data-bs-parent={`accordionFlush${this.accordionIndex}`}\r\n        >\r\n          <div class=\"accordion-body d-flex flex-column gap-2 border-gray\">\r\n\r\n            <mass-header\r\n              address={this.massInfo.address}\r\n              langCode={this.massInfo.langCode}\r\n            ></mass-header>\r\n\r\n            <mass-additional\r\n              rorate={this.massInfo.rorate}\r\n              online={this.massInfo.online}\r\n              broadcastUrl={this.massInfo.broadcastUrl}\r\n            ></mass-additional>\r\n            \r\n            <mass-footer\r\n              info={this.massInfo.info}\r\n              lastConfirmRelevance={this.massInfo.lastConfirmRelevance}\r\n            ></mass-footer>\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </>\r\n    )\r\n  }\r\n}"]}